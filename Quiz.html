<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <title>Touring</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">    
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
      <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand d-flex flex-column align-items-center text-decoration-none" href="home.html">
            <img class="logo" src="images/touringlogo.png" alt="Touring Logo">
            <span class="brand-text">Touring</span>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav d-flex align-items-center justify-content-center w-100">
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="history.html">
                    <img class="logo" src="images/history.png" alt="Login Icon">
                    <span class="login-text">History</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="architecture.html">
                    <img class="logo" src="images/architecture.png" alt="Login Icon">
                    <span class="login-text">Architecture</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="treasures.html">
                    <img class="logo" src="images/treasures.png" alt="Login Icon">
                    <span class="login-text">Treasures</span>
                  </a>
                </div>
              </li>

              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="paths.html">
                    <img class="logo" src="images/paths.png" alt="Login Icon">
                    <span class="login-text">Paths</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="Quiz.html">
                    <img class="logo" src="images/quiz.png" alt="Login Icon">
                    <span class="login-text">Quiz</span>
                  </a>
                </div>
              </li>
              <li class="nav-item ms-auto">
                <div class="logo-container">
                  <a class="nav-link login-link" href="#">
                    <img class="logo" src="images/touristboy.png" alt="Login Icon">
                    <span class="login-text">Login</span>
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <br>
      <img class="logo" src="images/quiz.png" alt="Login Icon">
      <h2 style="color: gray;"> <b>Quiz</b></h2>
      <div class="container my-5">
        <div class="row justify-content-center">
          <div class="col-md-12 p-4 bg-light rounded shadow mx-auto">
            <div id="quizContainer" class="p-4 bg-light rounded shadow">
              <div class="mb-3">
                <h5 style="color: gray;"> <b>Let's test your knowledge</b></h5>

                <div id="quizOptions" class="container my-5">
                  <h4 class="text-center text-secondary">Select categories to begin the quiz:</h4>
                  <div class="text-center mb-3">
                    <div class="form-check form-check-inline">
                      <input class="form-check-input quiz-option" type="checkbox" value="History" id="history">
                      <label class="form-check-label" for="history">History</label>
                    </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input quiz-option" type="checkbox" value="Architecture" id="architecture">
                    <label class="form-check-label" for="architecture">Architecture</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="Treasures" id="treasures">
                        <label class="form-check-label" for="treasures">Treasures</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="Paths" id="paths">
                        <label class="form-check-label" for="paths">Paths</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="mode" value="random" id="randomMode">
                        <label class="form-check-label" for="randomMode">Random</label>
                    </div>
                </div>
                <div class="text-center mb-4">
                    <button type="button" class="btn btn-primary" onclick="startQuiz()">Start Quiz</button>
                </div>
                </div>
                <div id="quizWrapper"></div> <!-- Î•Î´Ï Î¸Î± Î¼Ï€Î±Î¯Î½Î¿Ï…Î½ Î¿Î¹ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ -->
                <br><br>
                
                </div>
                  </div>
                  <div class="container my-5">
                    <div class="row justify-content-center">
                      <div class="col-md-12 p-4 bg-light rounded shadow mx-auto">
                        <div id="quizContainer" class="p-4 bg-light rounded shadow">
                          <div class="mb-3">
                  <button class="btn btn-warning" onclick="startAdaptiveQuiz()">Quick Fire Questions</button>
                  <br><br>
                  <div id="quizWrapper1"></div> <!-- Î•Î´Ï Î¸Î± Î¼Ï€Î±Î¯Î½Î¿Ï…Î½ Î¿Î¹ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ -->
                  <br><br>
                  <!-- Progress Bar -->
                  <div class="progress mb-3" style="height: 25px;">
                    <div id="adaptiveProgress" class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                        role="progressbar" style="width: 0%;">
                      0%
                    </div>
                  </div>
                  <br><br>
                  <!-- Î Î»Î±Î¯ÏƒÎ¹Î¿ Î³Î¹Î± adaptive quiz -->
                  <div id="adaptiveSummary" class="mt-4 text-center"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div>


      <!-- ÎšÏÎ´Î¹ÎºÎ±Ï‚ Î³Î¹Î± Ï„Î¿ slideshow-->
      <script>
      let currentLevel = "easy"; // Î¾ÎµÎºÎ¹Î½Î¬Î¼Îµ Î±Ï€ÏŒ ÎµÏÎºÎ¿Î»Î¿
      let correctStreak = 0;
      let wrongStreak = 0;
      let answeredQuestions = [];
      var quizQuestions = [];
      let selectedCategory = null;

      function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const dropZone = ev.target;

    if (dropZone.classList.contains("drop-zone") && dropZone.children.length === 0) {
      const expected = dropZone.getAttribute("data-expected");

      const draggedElement = document.getElementById(draggedId);
      dropZone.appendChild(draggedElement);

      if (draggedId === expected) {
        dropZone.classList.add("correct");
        dropZone.classList.remove("wrong");
      } else {
        dropZone.classList.add("wrong");
        dropZone.classList.remove("correct");
      }
      
      checkAllCorrect();

    }
  }
  function checkAllCorrect() {
    const dropZones = document.querySelectorAll('.drop-zone');
    let allCorrect = true;

    dropZones.forEach(zone => {
      const expected = zone.getAttribute('data-expected');
      const actual = zone.children[0]?.id;
      if (expected !== actual) {
        allCorrect = false;
      }
    });

    if (allCorrect) {
      launchConfetti();
    }
  }

  function launchConfetti() {
    const duration = 2 * 1000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 25, spread: 360, ticks: 60, zIndex: 999 };

    const interval = setInterval(() => {
      const timeLeft = animationEnd - Date.now();

      if (timeLeft <= 0) return clearInterval(interval);

      confetti(Object.assign({}, defaults, { origin: { x: 0.1, y: 0.5 } }));
      confetti(Object.assign({}, defaults, { origin: { x: 0.9, y: 0.5 } }));
    }, 200);
  }
      
 

    const questions = {
    History:  {
    easy: [
      {
        q: "Where does the name 'Andros' come from according to mythology?",
        a: ["Andros", "Apollo", "Zeus", "Sophocles"],
        correct: 0
      },
      {
        q: "Who raised the banner of the Greek Revolution in Andros in 1821?",
        a: ["Theophilos Kairis", "Kolokotronis", "Dionysios Solomos", "Dimitris Moraitis"],
        correct: 0
      },
      {
        q: "What was a key feature of Andros in prehistoric times?",
        a: ["Lush vegetation and abundant waters", "Desert landscape", "War castles", "Roman baths"],
        correct: 0
      }
    ],
    medium: [
      {
        q: "Which city was the capital of Andros during the Classical period?",
        a: ["Gavrio", "Korthi", "Paleopolis", "Chora"],
        correct: 2
      },
      {
        q: "Which god was most worshipped in ancient Andros?",
        a: ["Zeus", "Apollo", "Dionysus", "Isis"],
        correct: 2
      },
      {
        q: "What was the main change in Andros during the Roman era?",
        a: ["Arrival of the cult of Isis", "Population census", "New port built", "Ships sunk"],
        correct: 0
      }
    ],
    hard: [
      {
        q: "Which people co-founded cities in Chalkidiki with the people of Andros in the 7th century BC?",
        a: ["Athenians", "Phoenicians", "Chalcidians", "Cretans"],
        correct: 2
      },
      {
        q: "Why is Strofilas important to Cycladic history?",
        a: ["It was the largest Neolithic settlement in the Aegean", "It was a Roman capital", "It hosted a Persian battle", "It was an Ottoman base"],
        correct: 0
      },
      {
        q: "What indicates the economic peak of Andros during the Byzantine Middle Ages?",
        a: ["Development of silk industry and exports", "Building of an acropolis", "Roman amphitheaters", "Conquest by the Serbian Empire"],
        correct: 0
      }
    ]
  },Architecture: {
  easy: [
    {
      q: "What type of traditional building is common in the region of Korthi?",
      a: ["Glass buildings", "Traditional stone houses", "Neoclassical palaces", "Concrete apartments"],
      correct: 1
    },
    {
      q: "Which element helps Korthi houses withstand strong winds?",
      a: ["Large windows", "Thick stone walls", "Metal roofs", "Plastic panels"],
      correct: 1
    },
    {
      q: "What material are many rural houses in Andros made of?",
      a: ["Wood", "Steel", "Local stone", "Clay"],
      correct: 2
    }
  ],
  medium: [
    {
      q: "What makes Androsâ€™ architecture different from other Cycladic islands?",
      a: [
        "It follows modern urban design",
        "It mixes Aegean, neoclassical, and Venetian elements",
        "It uses only traditional Cycladic cubes",
        "It is influenced only by Ottoman designs"
      ],
      correct: 1
    },
    {
      q: "Which feature is especially seen on houses built during the Turkish rule?",
      a: ["Blue domes", "White flat roofs", "Colorful painted walls", "Glass windows"],
      correct: 2
    },
    {
      q: "What structure is often found around Korthi, decorated with geometric shapes?",
      a: ["Windmills", "Dovecotes", "Churches", "Tombs"],
      correct: 1
    }
  ],
  hard: [
    {
      q: "How do the traditional houses in Korthi harmonize with their surroundings?",
      a: [
        "They are painted with bright red paint",
        "They are built underground",
        "They use earthy tones and natural materials",
        "They mimic modern office buildings"
      ],
      correct: 2
    },
    {
      q: "What is a key architectural contribution of the Venetian period in Andros?",
      a: ["Luxury hotels", "Stone towers and fortresses", "Steel skyscrapers", "Neoclassical museums"],
      correct: 1
    },
    {
      q: "What is unique about the dovecotes of Andros?",
      a: [
        "They are built from marble",
        "They are used for fishing",
        "They are decorated with triangles, diamonds, and circles",
        "They contain underground tunnels"
      ],
      correct: 2
    }
  ]
},
    Treasures: {
  easy: [
    {
      q: "What does the Statue of the Unknown Sailor in Chora represent?",
      a: [
        "A war hero",
        "A poet",
        "All sailors lost at sea",
        "The islandâ€™s founder"
      ],
      correct: 2
    },
    {
      q: "What is the Bridge of Love famous for?",
      a: [
        "Being the longest bridge in Greece",
        "Its tragic history",
        "Couples making promises and wishes",
        "Its wooden structure"
      ],
      correct: 2
    },
    {
      q: "Where is the Old Woman's Leap located?",
      a: [
        "In the mountains",
        "On a beach by the sea",
        "At the village square",
        "Inside a church"
      ],
      correct: 1
    }
  ],
  medium: [
    {
      q: "What action made the old woman a symbol of betrayal during the Ottoman era?",
      a: [
        "She poisoned the guards",
        "She opened the fortress gate for invaders",
        "She guided enemies through the mountains",
        "She wrote secret messages"
      ],
      correct: 1
    },
    {
      q: "Why do people say the rock at Old Woman's Beach looks like a woman?",
      a: [
        "It has carvings on it",
        "It was sculpted by locals",
        "Its shape resembles a woman with a headscarf",
        "It's a famous statue"
      ],
      correct: 2
    },
    {
      q: "What is the Bridge of Love built from?",
      a: [
        "Wood",
        "Steel",
        "Stone",
        "Glass"
      ],
      correct: 2
    }
  ],
  hard: [
    {
      q: "What symbolic role does the Statue of the Unknown Sailor play in Andros?",
      a: [
        "A reminder of colonial rule",
        "A tribute to Androsâ€™ fishermen",
        "A guardian of sacrifice and memory",
        "A historical map marker"
      ],
      correct: 2
    },
    {
      q: "What emotion does the Bridge of Love traditionally evoke?",
      a: [
        "Anger",
        "Romance and nostalgia",
        "Fear",
        "Suspicion"
      ],
      correct: 1
    },
    {
      q: "What legend is tied to the creation of the Old Woman's Leap rock?",
      a: [
        "A pirate's curse",
        "A Roman love story",
        "A betrayal during Ottoman rule",
        "A battle with a sea monster"
      ],
      correct: 2
    }
  ]
},
    Paths: {
  easy: [
    {
      q: "Why did Andros originally have so many footpaths?",
      a: [
        "To attract tourists",
        "To connect settlements, ports, and places of worship",
        "For military defense",
        "For forest exploration"
      ],
      correct: 1
    },
    {
      q: "What is the estimated total length of the hiking network in Andros today?",
      a: [
        "100 kilometers",
        "150 kilometers",
        "200 kilometers",
        "Over 300 kilometers"
      ],
      correct: 3
    },
    {
      q: "What natural feature is common along many of Androsâ€™ paths?",
      a: [
        "Volcanoes",
        "Waterfalls and springs",
        "Caves",
        "Sand dunes"
      ],
      correct: 1
    }
  ],
  medium: [
    {
      q: "What type of architecture surrounds the hiking trails of Andros?",
      a: [
        "Roman ruins",
        "Wooden houses",
        "Rural stone architecture like terraces and dry-stone walls",
        "Modern tourist buildings"
      ],
      correct: 2
    },
    {
      q: "What do signs along the paths of Andros typically show?",
      a: [
        "The pathâ€™s sponsor",
        "Animal tracks",
        "Directions, distances, and trail connections",
        "Phone numbers for guides"
      ],
      correct: 2
    },
    {
      q: "What can you find along the paths aside from nature?",
      a: [
        "Vineyards and tunnels",
        "Shopping centers",
        "Chapels, bridges, and old mills",
        "Lighthouses and marble statues"
      ],
      correct: 2
    }
  ],
  hard: [
    {
      q: "Why is the landscape of Andros described as 'largely handmade'?",
      a: [
        "It was built by the Venetians",
        "It is carved into marble",
        "It was shaped by continuous human presence using stonework like terraces and walls",
        "It is a man-made island"
      ],
      correct: 2
    },
    {
      q: "Which of the following elements is part of the information provided for each hiking path?",
      a: [
        "Availability of guides",
        "Ancient myth references",
        "Ascent and descent in meters",
        "Mobile signal coverage"
      ],
      correct: 2
    },
    {
      q: "What caused the decline in use of the old paths after the mid-20th century?",
      a: [
        "Soil erosion",
        "Pirate invasions",
        "Introduction of cars and new roads",
        "Earthquakes"
      ],
      correct: 2
    }
  ]
}

};
     

       function startQuiz(forcedCategory = null) {
    const container = document.getElementById("quizContainer");
    container.style.display = "block";

    const wrapper = document.getElementById("quizWrapper");
    wrapper.innerHTML = "";

    let selected = [];

    if (forcedCategory) {
        selected = [forcedCategory];
    } else {
        selected = [...document.querySelectorAll('.quiz-option:checked')].map(el => el.value);
    }

    const randomMode = document.getElementById("randomMode")?.checked;

    

    if (randomMode || selected.length === 0) {
    for (const cat in questions) {
        const qList = questions[cat];
        const randomLevel = Object.values(qList)[0];
        const randomIndex = Math.floor(Math.random() * randomLevel.length);
        quizQuestions.push(randomLevel[randomIndex]);
    }
} else {
    selected.forEach(cat => {
        const levels = questions[cat];
        for (const level in levels) {
            quizQuestions = quizQuestions.concat(levels[level]);
        }
    });
}

// ğŸ‘‰ Î•Î´Ï ÎºÎ¬Î½ÎµÎ¹Ï‚ Î¼Î¯Î± ÎºÎ±Î¹ Î¼Î¿Î½Î±Î´Î¹ÎºÎ® ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· ÎµÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½:
quizQuestions.forEach((q, index) => {
    const qBlock = document.createElement("div");
    qBlock.className = "mb-4";
    qBlock.innerHTML = `
      <p><b>Q${index + 1}. ${q.q}</b></p>
      ${q.a.map((opt, i) =>
        `<div>
          <input type="radio" name="q${index}" value="${i}" id="q${index}a${i}">
          <label for="q${index}a${i}">${opt}</label>
        </div>`).join('')}
    `;
    wrapper.appendChild(qBlock);
});

// âœ… Î¤Î­Î»Î¿Ï‚, Ï€ÏÏŒÏƒÎ¸ÎµÏƒÎµ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ Ï…Ï€Î¿Î²Î¿Î»Î®Ï‚ Î¼Î¯Î± Ï†Î¿ÏÎ¬:
const submitBtn = document.createElement("button");
submitBtn.className = "btn btn-success mt-3";
submitBtn.textContent = "Î¥Ï€Î¿Î²Î¿Î»Î®";
submitBtn.onclick = checkQuizAnswers;
wrapper.appendChild(submitBtn);

    }

    function checkQuizAnswers() {
    const wrapper = document.getElementById("quizWrapper");
    const allQuestions = wrapper.querySelectorAll("div.mb-4");
    let score = 0;

    allQuestions.forEach((qBlock, index) => {
        const selected = qBlock.querySelector("input[type='radio']:checked");
        if (selected) {
            const isCorrect = parseInt(selected.value) === getCorrectAnswerIndex(index);
            if (isCorrect) score++;
        }
    });

    const result = document.createElement("p");
    result.className = "mt-3 fw-bold";
    result.textContent = `Î£ÎºÎ¿Ï: ${score}/${allQuestions.length}`;
    wrapper.appendChild(result);
}

function getCorrectAnswerIndex(index) {
    // Î£Ï…ÏƒÏ‡ÎµÏ„Î¯Î¶ÎµÎ¹ Ï„Î¿ index Î¼Îµ Ï„Î¿ quizQuestions
    return quizQuestions[index]?.correct ?? -1;
}


    quizQuestions.forEach((q, index) => {
        const qBlock = document.createElement("div");
        qBlock.className = "mb-4";
        qBlock.innerHTML = `
            <p><b>Q${index + 1}. ${q.q}</b></p>
            ${q.a.map((opt, i) =>
                `<div>
                    <input type="radio" name="q${index}" value="${i}" id="q${index}a${i}">
                    <label for="q${index}a${i}">${opt}</label>
                </div>`).join('')}
        `;
        wrapper.appendChild(qBlock);
    });

document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const quizId = urlParams.get("id");

    if (quizId) {
       selectedCategory = quizId; // âœ… Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ­ Ï„Î¿ Ï€Î±Î³ÎºÏŒÏƒÎ¼Î¹Î±
       document.getElementById("quizOptions").style.display = "none";
        const optionsSection = document.getElementById("quizOptions");
        if (optionsSection) {
            optionsSection.style.display = "none";
        }

        setTimeout(() => {
            startQuiz(quizId);
        }, 200);
    }
});
     

      function getNextQuestion(category) {
  const levelSet = questions[category][currentLevel];
  const unused = levelSet.filter(q => !answeredQuestions.includes(q.q));
  
  if (unused.length === 0) return null;

  const q = unused[Math.floor(Math.random() * unused.length)];
  answeredQuestions.push(q.q);
  return q;
}

function handleAnswer(isCorrect) {
  if (isCorrect) {
    correctStreak++;
    wrongStreak = 0;
    if (correctStreak >= 2) {
      if (currentLevel === "easy") currentLevel = "medium";
      else if (currentLevel === "medium") currentLevel = "hard";
      correctStreak = 0;
    }
  } else {
    wrongStreak++;
    correctStreak = 0;
    if (wrongStreak >= 2) {
      if (currentLevel === "hard") currentLevel = "medium";
      else if (currentLevel === "medium") currentLevel = "easy";
      wrongStreak = 0;
    }
  }
}

function showAdaptiveQuestion(category) {
  const wrapper = document.getElementById("quizWrapper1");
  wrapper.innerHTML = ""; // âœ… ÎšÎ±Î¸Î±ÏÎ¯Î¶ÎµÎ¹ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½ÎµÏ‚ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚
  
  const q = getNextQuestion(category);
  
  if (!q) {
    wrapper.innerHTML = "<p>No more questions!</p>";
    return;
  }

  wrapper.innerHTML = `
    <p><b>${q.q}</b></p>
    ${q.a.map((opt, i) => `
      <div>
        <input type="radio" name="answer" value="${i}" id="opt${i}">
        <label for="opt${i}">${opt}</label>
      </div>
    `).join('')}
    <button class="btn btn-success mt-2" onclick="submitAnswer(${q.correct}, '${category}')">Submit</button>
  `;
}

function submitAnswer(correctIndex, category) {
  const selected = document.querySelector("input[name='answer']:checked");
  if (!selected) return;

  const isCorrect = parseInt(selected.value) === correctIndex;
  handleAnswer(isCorrect);

  const nextQ = getNextQuestion(category);
    if (!nextQ) {
        const wrapper = document.getElementById("quizWrapper1");
        const score = answeredQuestions.length;
        wrapper.innerHTML = `<p>Î¤Î­Î»Î¿Ï‚! Î‘Ï€Î¬Î½Ï„Î·ÏƒÎµÏ‚ ${score} ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚.</p>`;
        return;
    }

  showAdaptiveQuestion(category);
}
function startAdaptiveQuiz() {
  // â¤ Î Î¬ÏÎµ Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î±Ï€ÏŒ Ï„Î¿ URL (Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹)
  const urlParams = new URLSearchParams(window.location.search);
  let categoryFromUrl = urlParams.get("id");

  let category;

  if (categoryFromUrl) {
    category = categoryFromUrl;
  } else {
    const checkedOptions = document.querySelectorAll(".quiz-option:checked");
    if (checkedOptions.length === 0) {
      alert("âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¯Î»ÎµÎ¾Îµ Î¼Î¯Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Ï€ÏÎ¹Î½ Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÎ¹Ï‚!");
      return;
    }
    category = checkedOptions[0].value;
  }

  // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎµ Ï„Î· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
  selectedCategory = category;

  // Reset Ï„Î¿Ï… adaptive quiz
  currentLevel = "easy";
  correctStreak = 0;
  wrongStreak = 0;
  answeredQuestions = [];

  // ÎšÎ±Î¸Î¬ÏÎ¹ÏƒÎ¼Î± UI
  document.getElementById("quizOptions").style.display = "none";
  document.getElementById("adaptiveSummary").innerHTML = "";
  document.getElementById("quizWrapper1").innerHTML = "";

  // Reset Progress
  updateAdaptiveProgress();

  // â¤ ÎÎµÎºÎ¯Î½Î·Î¼Î± ÎµÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½ Î³Î¹Î± Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
  showAdaptiveQuestion(category);
}


    // Adaptive Quiz Î¼Îµ Ï€ÏÎ¿ÏŒÎ´Î¿Ï…Ï‚ & ÏƒÏÎ½Î¿ÏˆÎ·
function updateAdaptiveProgress() {
  const total = 6;
  const current = answeredQuestions.length;
  const percent = Math.min((current / total) * 100, 100);

  const progressBar = document.getElementById("adaptiveProgress");
  progressBar.style.width = `${percent}%`;
  progressBar.textContent = `${Math.round(percent)}%`;
}

function showAdaptiveSummary() {
  const wrapper = document.getElementById("adaptiveSummary");
  const total = answeredQuestions.length;
  let stars = "";

  if (total >= 6) stars = "â­â­â­â­â­";
  else if (total >= 4) stars = "â­â­â­â­";
  else if (total >= 2) stars = "â­â­â­";
  else stars = "â­";

  const levelLabel = currentLevel.charAt(0).toUpperCase() + currentLevel.slice(1);

  wrapper.innerHTML = `
    <div class="p-4 bg-light border rounded shadow">
      <h4>ğŸ”š Î¤Î­Î»Î¿Ï‚ Adaptive Quiz</h4>
      <p><strong>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚:</strong> ${total}</p>
      <p><strong>Î¤ÎµÎ»Î¹ÎºÏŒ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ Î´Ï…ÏƒÎºÎ¿Î»Î¯Î±Ï‚:</strong> ${levelLabel}</p>
      <p style="font-size: 1.5rem;">${stars}</p>
      <button onclick="startAdaptiveQuiz()" class="btn btn-primary mt-3">ÎÎµÎºÎ¯Î½Î± ÎÎ±Î½Î¬</button>
    </div>
  `;
}

function submitAnswer(correctIndex, category) {
  const selected = document.querySelector("input[name='answer']:checked");
  if (!selected) return;

  const isCorrect = parseInt(selected.value) === correctIndex;
  handleAnswer(isCorrect);

  if (answeredQuestions.length >= 6) {
    const wrapper = document.getElementById("quizWrapper1");
    wrapper.innerHTML = `<p>ğŸ‰ Î¤Î­Î»Î¿Ï‚! Î‘Ï€Î¬Î½Ï„Î·ÏƒÎµÏ‚ ${answeredQuestions.length} ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚.</p>`;
    updateAdaptiveProgress();
    showAdaptiveSummary();
    return;
  }
  updateAdaptiveProgress();
  showAdaptiveQuestion(category);
}

function startAdaptiveQuiz() {
  let category = document.querySelector(".quiz-option:checked")?.value;

  if (!category) {
    const allOptions = document.querySelectorAll(".quiz-option");
    if (allOptions.length > 0) {
      allOptions[0].checked = true;
      category = allOptions[0].value;
    } else {
      alert("No categories available!");
      return;
    }
  }

  currentLevel = "easy";
  correctStreak = 0;
  wrongStreak = 0;
  answeredQuestions = [];

  document.getElementById("quizOptions").style.display = "none";
  document.getElementById("adaptiveSummary").innerHTML = "";
  document.getElementById("quizWrapper1").innerHTML = "";
  showAdaptiveQuestion(category);
}

      </script>


      <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>