<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <title>Touring</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">    
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
      <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand d-flex flex-column align-items-center text-decoration-none" href="home.html">
            <img class="logo" src="images/touringlogo.png" alt="Touring Logo">
            <span class="brand-text">Touring</span>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav d-flex align-items-center justify-content-center w-100">
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="history.html">
                    <img class="logo" src="images/history.png" alt="Login Icon">
                    <span class="login-text">History</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="architecture.html">
                    <img class="logo" src="images/architecture.png" alt="Login Icon">
                    <span class="login-text">Architecture</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="treasures.html">
                    <img class="logo" src="images/treasures.png" alt="Login Icon">
                    <span class="login-text">Treasures</span>
                  </a>
                </div>
              </li>

              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="paths.html">
                    <img class="logo" src="images/paths.png" alt="Login Icon">
                    <span class="login-text">Paths</span>
                  </a>
                </div>
              </li>
              <li class="nav-item">
                <div class="logo-container">
                  <a class="nav-link login-link" href="Quiz.html">
                    <img class="logo" src="images/quiz.png" alt="Login Icon">
                    <span class="login-text">Quiz</span>
                  </a>
                </div>
              </li>
              <li class="nav-item ms-auto">
                <div class="logo-container">
                  <a class="nav-link login-link" href="#">
                    <img class="logo" src="images/touristboy.png" alt="Login Icon">
                    <span class="login-text">Login</span>
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <br>
      <img class="logo" src="images/quiz.png" alt="Login Icon">
      <h2 style="color: gray;"> <b>Quiz</b></h2>
      <div class="container my-5">
        <div class="row justify-content-center">
          <div class="col-md-12 p-4 bg-light rounded shadow mx-auto">
            <form>
              <div class="mb-3">
                <h5 style="color: gray;"> <b>Let's test your knowledge</b></h5>
                <!-- Ερώτηση Paths -->
                <div class="question category-Paths" style="display: none;">
                    <p><b>Which of the following is a popular hiking destination in Andros?</b></p>
                    <div><input type="radio" name="q1" value="a"> Kato Kastro</div>
                    <div><input type="radio" name="q1" value="b"> Pythara Waterfalls</div>
                    <div><input type="radio" name="q1" value="c"> Agios Petros Tower</div>
                    <div><input type="radio" name="q1" value="d"> Paleopolis Museum</div>
                </div>

                <!-- Ερώτηση History -->
                <div class="question category-History" style="display: none;">
                    <p><b>Who raised the banner of the Greek Revolution in Andros in 1821?</b></p>
                    <div><input type="radio" name="q2" value="a"> Lambros Katsonis</div>
                    <div><input type="radio" name="q2" value="b"> Theophilos Kairis</div>
                    <div><input type="radio" name="q2" value="c"> Dionysios Solomos</div>
                    <div><input type="radio" name="q2" value="d"> Dimitris Moraitis</div>
                </div>

                

                <div class="container my-5">
                    <h4 class="text-center text-secondary">Select categories to begin the quiz:</h4>
                    <div class="text-center mb-3">
                        <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="History" id="history">
                        <label class="form-check-label" for="history">History</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="Architecture" id="architecture">
                        <label class="form-check-label" for="architecture">Architecture</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="Treasures" id="treasures">
                        <label class="form-check-label" for="treasures">Treasures</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input quiz-option" type="checkbox" value="Paths" id="paths">
                        <label class="form-check-label" for="paths">Paths</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="mode" value="random" id="randomMode">
                        <label class="form-check-label" for="randomMode">Random</label>
                        </div>
                    </div>

                    <div class="text-center mb-4">
                        <button class="btn btn-primary" onclick="startQuiz()">Start Quiz</button>
                    </div>

                    <form id="quizContainer" class="p-4 bg-light rounded shadow" style="display: none;">
                        <!-- Εδώ θα εμφανιστούν δυναμικά οι ερωτήσεις -->
                    </form>
                </div>


                
                
  <h4 class="text-center mb-4" style="color: gray;">
    Here is a challenge for you<br>
    <b>Match the caption with the correct image!</b>
  </h4>

  <div class="card p-4 shadow-sm">
    
    <!-- Εικόνες και περιοχές απόθεσης -->
    <div class="row text-center">
      <div class="col-md-4 mb-4">
        <img src="images/bol1.jpg" class="img-fluid rounded shadow" alt="The Bridge of Love">
        <div class="drop-zone mt-2" ondrop="drop(event)" ondragover="allowDrop(event)" data-expected="The Bridge of Love"></div>
      </div>
      <div class="col-md-4 mb-4">
        <img src="images/an1.jpg" class="img-fluid rounded shadow" alt="The Statue Of Latent Seaman">
        <div class="drop-zone mt-2" ondrop="drop(event)" ondragover="allowDrop(event)" data-expected="The Statue Of Latent Seaman"></div>
      </div>
      <div class="col-md-4 mb-4">
        <img src="images/gp1.jpg" class="img-fluid rounded shadow" alt="Old Woman's Beach the jump">
        <div class="drop-zone mt-2" ondrop="drop(event)" ondragover="allowDrop(event)" data-expected="Old Woman's Beach the jump"></div>
      </div>
    </div>

    <!-- Λεζάντες προς μεταφορά -->
    <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
      <div class="draggable" draggable="true" ondragstart="drag(event)" id="Old Woman's Beach the jump">Old Woman's Beach the jump</div>
      <div class="draggable" draggable="true" ondragstart="drag(event)" id="The Bridge of Love">The Bridge of Love</div>
      <div class="draggable" draggable="true" ondragstart="drag(event)" id="The Statue Of Latent Seaman">The Statue Of Latent Seaman</div>
    </div>

  </div>
</div>

                
                <div class="container my-4">
                  <div class="d-flex justify-content-end">
                    <div class="p-3 border rounded bg-white text-end" style="max-width: 300px;">
                      <button style="color: white;" type="button" class="btn btn-info mt-2" onclick="nextSlide()"><b>Test</b></button>
                      <img src="images/quiz.png" alt="Quiz icon" style="width: 50px;">
                      <p class="text-muted fst-italic mb-0" style="font-size: 0.9rem;">
                        Let's see what you've learned about the Treasures of Andros!
                      </p>
                    </div>
                  </div>
                </div>

                </div>
            </form>
          </div>
        </div>
      </div>


      <!-- Κώδικας για το slideshow-->
      <script>
        window.onload = function() {
          const slides = [
          { image: "images/katokastro.png", caption: "Kato Kastro - Venetian Rule" },
          { image: "images/epanokastro.jpg", caption: "Epano Kastro - Andros Fortress" }
          ];

          let currentIndex = 0;

          window.nextSlide = function() {
          currentIndex = (currentIndex + 1) % slides.length;
          document.getElementById("slideImage").src = slides[currentIndex].image;
          document.getElementById("caption").innerText = slides[currentIndex].caption;
          };
        };

      function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const dropZone = ev.target;

    if (dropZone.classList.contains("drop-zone") && dropZone.children.length === 0) {
      const expected = dropZone.getAttribute("data-expected");

      const draggedElement = document.getElementById(draggedId);
      dropZone.appendChild(draggedElement);

      if (draggedId === expected) {
        dropZone.classList.add("correct");
        dropZone.classList.remove("wrong");
      } else {
        dropZone.classList.add("wrong");
        dropZone.classList.remove("correct");
      }
      
      checkAllCorrect();

    }
  }
  function checkAllCorrect() {
    const dropZones = document.querySelectorAll('.drop-zone');
    let allCorrect = true;

    dropZones.forEach(zone => {
      const expected = zone.getAttribute('data-expected');
      const actual = zone.children[0]?.id;
      if (expected !== actual) {
        allCorrect = false;
      }
    });

    if (allCorrect) {
      launchConfetti();
    }
  }

  function launchConfetti() {
    const duration = 2 * 1000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 25, spread: 360, ticks: 60, zIndex: 999 };

    const interval = setInterval(() => {
      const timeLeft = animationEnd - Date.now();

      if (timeLeft <= 0) return clearInterval(interval);

      confetti(Object.assign({}, defaults, { origin: { x: 0.1, y: 0.5 } }));
      confetti(Object.assign({}, defaults, { origin: { x: 0.9, y: 0.5 } }));
    }, 200);
  }
      </script>
      <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const urlParams = new URLSearchParams(window.location.search);
                    const quizId = urlParams.get("id");

                    // Απόκρυψη όλων
                    document.querySelectorAll(".question").forEach(el => el.style.display = "none");

                    // Εμφάνιση μόνο όσων ανήκουν στην κατηγορία
                    if (quizId) {
                    document.querySelectorAll(".category-" + quizId).forEach(el => el.style.display = "block");
                    }
                });
            </script>
            <script>
        const questions = {
            History: [
            {
                q: "Who raised the banner of the Greek Revolution in Andros in 1821?",
                a: ["Lambros Katsonis", "Theophilos Kairis", "Dionysios Solomos", "Dimitris Moraitis"],
                correct: 1
            }
            ],
            Architecture: [
            {
                q: "What is a key feature of Andros' traditional architecture?",
                a: ["Neoclassical roofs", "Stone drywalls", "Domes", "Concrete balconies"],
                correct: 1
            }
            ],
            Treasures: [
            {
                q: "Where is the Hermes of Andros housed?",
                a: ["Athens Museum", "Delphi", "Andros Museum", "Delos"],
                correct: 2
            }
            ],
            Paths: [
            {
                q: "Which of the following is a popular hiking destination in Andros?",
                a: ["Kato Kastro", "Pythara Waterfalls", "Agios Petros Tower", "Paleopolis Museum"],
                correct: 1
            }
            ]
        };

        function startQuiz() {
            const container = document.getElementById("quizContainer");
            container.innerHTML = ""; // clear previous quiz
            container.style.display = "block";

            const selected = [...document.querySelectorAll('.quiz-option:checked')].map(el => el.value);
            const randomMode = document.getElementById("randomMode").checked;

            let quizQuestions = [];

            if (randomMode || selected.length === 0) {
            // Πάρε 1 random ερώτηση από κάθε κατηγορία
            for (const cat in questions) {
                const qList = questions[cat];
                const randomIndex = Math.floor(Math.random() * qList.length);
                quizQuestions.push(qList[randomIndex]);
            }
            } else {
            selected.forEach(cat => {
                quizQuestions = quizQuestions.concat(questions[cat]);
            });
            }

            // Προβολή ερωτήσεων
            quizQuestions.forEach((q, index) => {
            const qBlock = document.createElement("div");
            qBlock.className = "mb-4";
            qBlock.innerHTML = `
                <p><b>Q${index + 1}. ${q.q}</b></p>
                ${q.a.map((opt, i) =>
                `<div>
                    <input type="radio" name="q${index}" value="${i}" id="q${index}a${i}">
                    <label for="q${index}a${i}">${opt}</label>
                </div>`).join('')}
            `;
            container.appendChild(qBlock);
            });
        }
      </script>


      <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>